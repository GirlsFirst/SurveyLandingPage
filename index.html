<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" type="image/png" href="http://girlswhocode.com/apple-icon.png">

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>
  <!-- Latest compiled and minified CSS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">

  <!-- Optional theme -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap-theme.min.css" integrity="sha384-fLW2N01lMqjakBkx3l/M9EahuwpSfeNvV63J5ezn3uZzapT0u7EYsXMjQV+0En5r" crossorigin="anonymous">

  <!-- Latest compiled and minified JavaScript -->
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>

  <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.2/css/select2.min.css" rel="stylesheet" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.2/js/select2.min.js"></script>
  <link href='https://fonts.googleapis.com/css?family=Raleway:400,800' rel='stylesheet' type='text/css'>
  <link href="css/stylesheet.css" rel="stylesheet">
  <script src="js/data.js"></script>
  <script src="js/index.js"></script>

  <link href='https://fonts.googleapis.com/css?family=Raleway:400,800' rel='stylesheet' type='text/css'>
  <link href="css/stylesheet.css" rel="stylesheet">

  <title>SIP 2016 Surveys</title>

</head>

<body>
  <div class="nav">
    <a href=""><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/a/a1/GWC_logo_2016_.png/220px-GWC_logo_2016_.png" id="site-logo"></a>
  </div>
  <div class="container-fluid col-md-8 col-md-offset-2">
    <h1>Summer Immersion Program 2016 Surveys</h1>
    <h2>Who are you?</h2>


    <div class="well">
      <label for="usr">Select Your Classroom:</label>
      <br>
      <select class="js-example-data-array" id="classroom">
        <option value="-1" selected="selected">Select a Classroom</option>
      </select>
      <script type="text/javascript">

        $(".js-example-data-array").select2({
          data: classroom_names
          })
        $(".js-example-data-array-selected").select2({
          data: classroom_names
          })
        </script>

        <br>
        <br>

        <div class="form-group">
          <label for="usr">First Name:</label>
          <input type="text" class="form-control" id="first_name">
        </div>

        <div class="form-group">
          <label for="usr">Last Name:</label>
          <input type="text" class="form-control" id="last_name">
        </div>

        <div class="form-group">
          <label for="usr">Email Address:</label>
          <input type="text" class="form-control" id="email">
        </div>

    </div>
    <h2>Which Survey Are You Taking?</h2>
    <div class="well">
      <label for="usr">Select The Survey:</label>
      <br>

      <select class="js-example-data-array" id="survey">
        <option value="-1" selected="selected">Select a Survey</option>
      </select>
      <script type="text/javascript">

          $(".js-example-data-array").select2({
            data: surveysData
            })
          $(".js-example-data-array-selected").select2({
            data: surveysData
            })
          </script>
  </div>

  <div class="span7 text-center">
      <button type="button" class="btn btn-primary" id="button_submit">Take Me To The Survey!</button>
  </div>

  <script>
    $('#button_submit').attr('disabled', 'disabled');

    $('#classroom').on('change', function() {
        classroom = $(this).val();
        $('#hidden').val(classroom);
        if($('#hidden').val(survey) != -1 && document.getElementById("first_name").value != '' && document.getElementById("last_name").value != ''){
          $('#button_submit').removeAttr('disabled');
        }
    });

    $('#survey').on('change', function() {
        survey = $(this).val();
        console.log(survey);
        $('#hidden').val(survey);
        if($('#hidden').val(classroom) != '' && document.getElementById("first_name").value != '' && document.getElementById("last_name").value != ''){
          $('#button_submit').removeAttr('disabled');
        }
    });
    $('#first_name').on('change', function() {
        if($('#hidden').val(classroom) != '' && $('#hidden').val(survey) != -1 && document.getElementById("last_name").value != ''){
          $('#button_submit').removeAttr('disabled');
        }
    });
    $('#email').on('change', function() {
        if($('#hidden').val(classroom) != '' && $('#hidden').val(survey) != -1 && document.getElementById("last_name").value != ''){
          $('#button_submit').removeAttr('disabled');
        }
    });
    $('#last_name').on('change', function() {
        if($('#hidden').val(classroom) != '' && $('#hidden').val(survey) != -1 && document.getElementById("first_name").value != ''){
          $('#button_submit').removeAttr('disabled');
        }
    });

    document.getElementById("button_submit").onclick = function () {
      var first_name = document.getElementById("first_name").value
      var last_name = document.getElementById("last_name").value
      var email = document.getElementById("email").value

      console.log(survey)
      console.log(surveysData[0])
      console.log(surveysData[survey].codes)

      var code0 = surveysData[survey].codes[0];
      var code1 = surveysData[survey].codes[1];
      var code2 = surveysData[survey].codes[2];
      var code3 = surveysData[survey].codes[3]
      console.log(classroom)

      if(survey != 9){
        classroom = classroom_names[classroom].text;
        classroom = urlEncoder(classroom);
      }

      var url = surveysData[survey].url;


      url += "?" + code0 + "=" + classroom + "&" + code1 + "=" + first_name + "&" + code2 + "=" + last_name;
      console.log(url)

      location.href = url


      //console.log(new_classroom)
      //console.log(survey)
      //console.log(document.getElementById("first_name").value)
      //console.log(document.getElementById("last_name").value)
      //var surveyURLs = [{0, "https://www/tfaforms.com/424566"}]

    }
  </script>
  <br>
  <footer>
    <div class="footer">
      <div class="center-block">
          <div class="small navbar-text text-center">
              <p>Made By Ellen McCullagh</p>
          </div>
      </div>
  </div>
</footer>
</div>


</body>
